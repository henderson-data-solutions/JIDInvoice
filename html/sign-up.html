<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>SocialV - Responsive Bootstrap 4 Admin Dashboard Template</title>
    <!-- Favicon -->
    <link rel="shortcut icon" href="images/favicon.ico" />
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- Typography CSS -->
    <link rel="stylesheet" href="css/typography.css">
    <!-- Style CSS -->
    <link rel="stylesheet" href="css/style.css">
    <!-- Responsive CSS -->
    <link rel="stylesheet" href="css/responsive.css">
    <!-- awesome font -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">

    <style>
        div.togglePassword {
            position: relative;
            top: -35px;
            left: 360px;
            cursor: pointer;
        }

        #passwordwarn {
            color: red;
        }
    </style>

</head>
<body>
    <!-- loader Start -->
    <div id="loading">
        <div id="loading-center">
        </div>
    </div>
    <!-- loader END -->
    <!-- Sign in Start -->
    <section class="sign-in-page">
        <div id="container-inside">
            <div id="circle-small"></div>
            <div id="circle-medium"></div>
            <div id="circle-large"></div>
            <div id="circle-xlarge"></div>
            <div id="circle-xxlarge"></div>
        </div>
        <div class="container p-0">
            <div class="row no-gutters">
                <div class="col-md-6 text-center pt-5">
                    <div class="sign-in-detail text-white">
                        <a class="sign-in-logo mb-5" href="#"><img src="https://hendersondatasolutions.com/wp-content/uploads/2018/11/hds-logo-main-nav.png" class="img-fluid" alt="logo"></a>
                        <div class="owl-carousel" data-autoplay="true" data-loop="true" data-nav="false" data-dots="true" data-items="1" data-items-laptop="1" data-items-tab="1" data-items-mobile="1" data-items-mobile-sm="1" data-margin="0">
                            <div class="item">
                                <img src="https://hendersondatasolutions.com/wp-content/uploads/2018/12/database-security-sidepic.jpg" class="img-fluid mb-4" alt="logo">
                                <h4 class="mb-1 text-white">Highly Secured</h4>
                                <p>Your Security, Our Priority: Log in securely with industry-standard encryption.</p>
                            </div>
                            <div class="item">
                                <img src="https://hendersondatasolutions.com/wp-content/uploads/2018/12/tech-support-callcenter.jpg" class="img-fluid mb-4" alt="logo">
                                <h4 class="mb-1 text-white">Access from Anywhere</h4>
                                <p>Seamless Access Anywhere: Log in from any device, anytime.</p>
                            </div>
                            <div class="item">
                                <img src="https://hendersondatasolutions.com/wp-content/uploads/2018/12/IT-staff-sidepic.jpg" class="img-fluid mb-4" alt="logo">
                                <h4 class="mb-1 text-white">User friendly</h4>
                                <p>Simple and Intuitive: Experience a clean, easy-to-use login interface.</p>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="col-md-6 bg-white pt-5">
                    <div class="sign-in-from">
                        <h1 class="mb-0">Sign Up</h1>
                        <p>Enter your email address and password to access admin panel.</p>
                        <form class="mt-4">
                            <div class="form-group">
                                <label for="fullname">Your Full Name</label>
                                <input type="email" class="form-control mb-0" id="fullname" placeholder="Your Full Name">
                            </div>
                            <div class="form-group">
                                <label for="email">Email address</label>
                                <input type="email" class="form-control mb-0" id="email" placeholder="Enter email">
                            </div>

                            <div class="form-group">
                                <label for="password">Password</label>
                                <input type="password" class="form-control mb-0" id="password" placeholder="Password">
                                <div class="togglePassword" id="divTogglePassword">
                                    <i class="far fa-eye" id="togglePassword"></i>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="passwordrepeat">Repeat Password</label>
                                <input type="password" class="form-control mb-0" id="passwordrepeat" placeholder="Repeat Password">
                                <div class="togglePassword" id="divTogglePasswordRepeat">
                                    <i class="far fa-eye" id="togglePasswordRepeat"></i>
                                </div>
                            </div>

                            <div class="form-group">
                                <span id="passwordwarn">&nbsp;</span>
                            </div>

                            <div class="d-inline-block w-100">
                                <div class="custom-control custom-checkbox d-inline-block mt-2 pt-1">
                                    <input type="checkbox" class="custom-control-input" id="TermsAndConditions"/>
                                    <label class="custom-control-label" for="TermsAndConditions">I accept <a href="#">Terms and Conditions</a></label>
                                </div>
                                <button type="button" 
                                        id="btnSubmit" 
                                        class="btn btn-primary float-right">Sign Up</button>
                            </div>
                            <div class="sign-info">
                                <span class="dark-color d-inline-block line-height-2">Already Have Account? <a href="/html/sign-in.html">Log In</a></span>
                                <ul class="iq-social-media">
                                    <li><a href="#"><i class="ri-facebook-box-line"></i></a></li>
                                    <li><a href="#"><i class="ri-twitter-line"></i></a></li>
                                    <li><a href="#"><i class="ri-instagram-line"></i></a></li>
                                </ul>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Sign in END -->
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="js/jquery.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <!-- Appear JavaScript -->
    <script src="js/jquery.appear.js"></script>
    <!-- Countdown JavaScript -->
    <script src="js/countdown.min.js"></script>
    <!-- Counterup JavaScript -->
    <script src="js/waypoints.min.js"></script>
    <script src="js/jquery.counterup.min.js"></script>
    <!-- Wow JavaScript -->
    <script src="js/wow.min.js"></script>
    <!-- lottie JavaScript -->
    <script src="js/lottie.js"></script>
    <!-- Apexcharts JavaScript -->
    <script src="js/apexcharts.js"></script>
    <!-- Slick JavaScript -->
    <script src="js/slick.min.js"></script>
    <!-- Select2 JavaScript -->
    <script src="js/select2.min.js"></script>
    <!-- Owl Carousel JavaScript -->
    <script src="js/owl.carousel.min.js"></script>
    <!-- Magnific Popup JavaScript -->
    <script src="js/jquery.magnific-popup.min.js"></script>
    <!-- Smooth Scrollbar JavaScript -->
    <script src="js/smooth-scrollbar.js"></script>
    <!-- Chart Custom JavaScript -->
    <script src="js/chart-custom.js"></script>
    <!-- Custom JavaScript -->
    <script src="js/custom.js"></script>
    <script>

        $('div.togglePassword').click(togglePasswordView);
        $('input#password').keyup(comparePasswords);
        $('input#passwordrepeat').keyup(comparePasswords);
        $('input#password').change(comparePasswords);
        $('input#passwordrepeat').change(comparePasswords);
        $('#btnSubmit').click(doSubmit);

        function doSubmit() {
            alert('doSubmit()');
            var msg = '';
            //confirm fullname
            if ($("input#fullname").val() == '') {
                msg += "Please enter your full name.\n";
            }

            //confirm email
            var email = $("input#email").val();
            if (!isEmailValid(email)) {
                msg += 'The email address does not appear to be valid.\n';
            }

            //confirm passwords are equal
            if ($("input#password").val() == '' || $("input#passwordrepeat").val() == '') {
                msg += "One or both passwords are empty.\n";
            }

            if ($("input#password").val() != $("input#passwordrepeat").val()) {
                msg += "The passwords do not match.\n";
            }

            //confirm Terms and Conditions have been accepted
            if (!$('#TermsAndConditions').prop('checked')) {
                msg += "Please accept the terms and conditions\n"
            }

            if (msg != '') {
                msg = 'Unable to submit the form. Please correct the below conditions.\n\n' + msg;
                alert(msg);
                return false;
            } else {
                //call the api to register a user
                var url = localStorage.getItem("apiRegisterUser");

                var obj = {
                    FullName: $("input#fullname").val(),
                    Email: $("input#email").val(),
                    Password: $("input#email").val(),
                    PasswordRepeat: localStorage.getItem("client_secret"),
                    TermsAndConditions: $("input#TermsAndConditions").checked
                };
               }

               $.ajax
                   ({
                       type: "POST",
                       url: url,
                       dataType: 'json',
                       data: JSON.stringify(obj),
                       contentType: "application/json; charset=utf-8",
                       success: function (Status) {
                           debugger;
                           if (Status.Status == 0) {
                               window.location.href = "./emailverification.html";                                
                           }
                           else
                           {
                               alert(Status.Message);
                           }
                       },
                       error: function (xhr, status, error) {
                           alert("An unspecified error was encountered attempting to register the user.");
                       }
                   })
        }

        function isEmailValid(email) {
            var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
            if (email.match(mailformat)) {
                return true;
            }
            else {
                return false;
            }
        }

        function comparePasswords() {
            if ($("input#password").val() != $("input#passwordrepeat").val()) {
                $("span#passwordwarn").text("The passwords do not match");
            } else {
                $("span#passwordwarn").text("");
            }
        }
         
        function togglePasswordView(element) {
            var id = element.currentTarget.id;

            var input;
            if (id == "divTogglePassword") {
                input = $("input#password");
            } else {
                input = $("input#passwordrepeat")
            }

            if (input.attr('type') == 'password') {
                input.attr('type', 'text')
            }
            else {
                input.attr('type', 'password');
            }
        }

    </script>
</body>
</html>